{% extends 'base.html.twig' %}

{% block title %}HelloRecettes - Mes recettes
{% endblock %}

{% block body %}
	<div class="container mt-4 mb-5">
		<div class="page-header-section">
			<div class="page-icon">ğŸ“–</div>
			<h1 class="page-title">Mes recettes</h1>
			<p class="page-subtitle">GÃ©rez vos crÃ©ations culinaires personnelles</p>
		</div>

		{% for message in app.flashes('success') %}
			<div class="alert alert-success mt-4">
				{{ message }}
			</div>
		{% endfor %}

		{% if not recipes.items is same as([]) %}
			<div class="d-flex justify-content-between align-items-center mb-4">
				<div class="recipes-count">
					<span class="badge-count">{{ recipes.getTotalItemCount }}
						recette{{ recipes.getTotalItemCount > 1 ? 's' : '' }}</span>
				</div>
				<a href="{{ path('recipe.new') }}" class="btn btn-create">
					â• CrÃ©er une recette
				</a>
			</div>

			<div class="row mt-4">
				{% for recipe in recipes %}
					<div class="col-md-6 col-lg-4 mb-4">
						<div class="recipe-card-personal">
							<div class="recipe-card-header">
								<span class="recipe-badge">#{{ recipe.id }}</span>
								<div class="recipe-actions">
									<a href="{{ path('recipe.edit', {id: recipe.id }) }}" class="btn-action btn-edit" title="Modifier">
										âœï¸
									</a>
									<a href="{{ path('recipe.delete', {id: recipe.id }) }}" class="btn-action btn-delete" title="Supprimer">
										ğŸ—‘ï¸
									</a>
								</div>
							</div>
							<div class="recipe-card-body">
								{% if recipe.image %}
									<div class="recipe-image-wrapper">
										<img class="img-fluid recipe-image" src="{{ asset('../image/products/'~ recipe.image) }}" alt="Photo de {{ recipe.name }}"/>
									</div>
								{% else %}
									<div class="recipe-image-wrapper">
										<div class="recipe-no-image">ğŸ½ï¸</div>
									</div>
								{% endif %}
								<h4 class="recipe-card-title">{{ recipe.name }}</h4>
								<div class="recipe-info">
									<div class="info-item">
										<span class="info-label">ğŸ’° Prix</span>
										<span class="info-value">{{ recipe.price ? recipe.price ~ 'â‚¬' : 'Non dÃ©fini' }}</span>
									</div>
									<div class="info-item">
										<span class="info-label">â­ DifficultÃ©</span>
										<span class="info-value">{{ recipe.difficulty ? recipe.difficulty : 'Non dÃ©finie' }}</span>
									</div>
									<div class="info-item">
										<span class="info-label">ğŸ“… CrÃ©Ã©e le</span>
										<span class="info-value">{{ recipe.createdAt|date('d/m/Y') }}</span>
									</div>
								</div>
							</div>
						</div>
					</div>
				{% endfor %}
			</div>

			<div class="pagination-wrapper">
				{{ knp_pagination_render(recipes) }}
			</div>
		{% else %}
			<div class="empty-state">
				<div class="empty-icon">ğŸ“–</div>
				<h3>Aucune recette</h3>
				<p>Commencez par crÃ©er votre premiÃ¨re recette dÃ©licieuse !</p>
				<a href="{{ path('recipe.new') }}" class="btn btn-create mt-3">
					â• CrÃ©er ma premiÃ¨re recette
				</a>
			</div>
		{% endif %}
	</div>
{% endblock %}
