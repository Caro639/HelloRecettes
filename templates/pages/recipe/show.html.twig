{% extends 'base.html.twig' %}

{% block title %}HelloRecettes - {{ recipe.name }}
{% endblock %}

{% block body %}
	<div class="container mt-4">

		{% for message in app.flashes('success') %}
			<div class="alert alert-success mt-4">
				{{ message }}
			</div>
		{% endfor %}

		<div class="row">
			{# Colonne gauche - Image et informations principales #}
			<div class="col-md-5">
				<div class="card border-primary">
					<div class="card-header">
						<h1 class="h4 mb-0">{{ recipe.name }}</h1>
					</div>
					<div class="card-body">
						<div class="text-center mb-3">
							{% if recipe.image %}
								<img class="img-fluid rounded" style="max-height: 300px; object-fit: cover;" src="{{ asset('../image/products/'~ recipe.image) }}" alt="Photo de la recette"/>
							{% else %}
								<img class="img-fluid rounded" style="max-height: 300px; object-fit: cover;" src="{{ asset('../image/products/replace.jpg') }}" alt="Photo par dÃ©faut de la recette"/>
							{% endif %}
						</div>

						<div class="text-center mb-3">
							<span class="badge bg-warning text-dark fs-6">
								â­ Note moyenne : {{ recipe.average|number_format(2, '.', ',') }}/5
							</span>
						</div>

						<div class="mb-2">
							<span class="badge bg-secondary">ğŸ“… CrÃ©Ã© le {{ recipe.createdAt|date('d/m/Y') }}</span>
						</div>

						{# Informations pratiques #}
						<div class="mt-4">
							<h5 class="border-bottom pb-2">Informations pratiques</h5>
							<ul class="list-unstyled">
								<li class="mb-2">
									<strong>â±ï¸ Temps :</strong>
									{% if recipe.time %}
										{{ recipe.time|minutes_to_hour }}
									{% else %}
										<span class="text-muted">Non renseignÃ©</span>
									{% endif %}
								</li>
								<li class="mb-2">
									<strong>ğŸ‘¥ Personnes :</strong>
									{% if recipe.nbPeople %}
										{{ recipe.nbPeople }}
									{% else %}
										<span class="text-muted">Non renseignÃ©</span>
									{% endif %}
								</li>
								<li class="mb-2">
									<strong>ğŸ“Š DifficultÃ© :</strong>
									{% if recipe.difficulty %}
										{{ recipe.difficulty }}/5
									{% else %}
										<span class="text-muted">Non renseignÃ©e</span>
									{% endif %}
								</li>
								<li class="mb-2">
									<strong>ğŸ’° Prix :</strong>
									{% if recipe.price %}
										{{ recipe.price }}â‚¬
									{% else %}
										<span class="text-muted">Non renseignÃ©</span>
									{% endif %}
								</li>
							</ul>
						</div>
					</div>
				</div>
			</div>

			{# Colonne droite - Description et ingrÃ©dients #}
			<div class="col-md-7">
				<div class="card border-primary mb-4">
					<div class="card-header">
						<h5 class="mb-0">ğŸ“ Description</h5>
					</div>
					<div class="card-body">
						{{ recipe.description|raw }}
					</div>
				</div>

				<div class="card border-primary mb-4">
					<div class="card-header">
						<h5 class="mb-0">ğŸ›’ IngrÃ©dients</h5>
					</div>
					<div class="card-body">
						<div class="d-flex flex-wrap gap-2">
							{% for ingredient in recipe.ingredients %}
								<span class="badge bg-primary fs-6 px-3 py-2">{{ ingredient.name }}</span>
							{% endfor %}
						</div>
					</div>
				</div>

				{# Formulaire d'Ã©valuation #}
				<div class="card border-warning">
					<div class="card-header bg-warning">
						<h5 class="mb-0">â­ Donner une note</h5>
					</div>
					<div class="card-body">
						{{ form(form) }}
					</div>
				</div>
			</div>
		</div>
	</div>
{% endblock %}
